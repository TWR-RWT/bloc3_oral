{% extends "base.html" %}
{% block body %}
<h1>Entrez une nouvelle promotion</h1>
<em>Attention si votre promotion chevauche la période d'une promotion déjà existante pour le(s) produit(s) sélectionné(s) alors celà supprimera totalement l'ancienne promotion</em>
<form method="POST" action="{{ url_for('submit_promotion') }}">
    <div>
      <label for="produit">Produit:</label>
      <select id="produit" name="produits" multiple>
        {% for product in products %}
          <option value="{{ product[0] }}" name="produit">{{ product[1] }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label for="pourcentage">Pourcentage de remise:</label>
      <input type="number" id="pourcentage" name="pourcentage" min="1" max="100" required>
    </div>
    <div>
      <label for="date_debut">Date de début:</label>
      <input type="date" id="date_debut" name="date_debut" required>
    </div>
    <div>
      <label for="date_fin">Date de fin:</label>
      <input type="date" id="date_fin" name="date_fin" required>
    </div>
    <input type="submit" value="Créer la promotion">
  </form>
  
  <h1>Liste des promotions</h1>

  <table>
    <thead>
      <tr>
        <th>Produit</th>
        <th>Réduction</th>
        <th>Date de début</th>
        <th>Date de fin</th>
      </tr>
    </thead>
    <tbody>
      {% for promotion in promotions %}
        <tr>
          <td>{{ promotion[1] }}</td>
          <td>{{ promotion[2] }}%</td>
          <td>{{ promotion[3].strftime('%d/%m/%Y') }}</td>
          <td>{{ promotion[4].strftime('%d/%m/%Y') }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}